<!DOCTYPE html>
<html>
<head>
  <title>Progressive Darkening and Lightening Effect</title>
  <style>
    #square {
      width: 200px;
      height: 200px;
      background-color: #8b1d1d;
      transition: filter 0.3s ease;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="square" onclick="toggleShade(this)"></div>
  <button onclick="toggleLighten(this)">Lighten</button>

  <script>
    const shadingMode = (elem) => {
      let currentBrightness = parseFloat(elem.style.filter.slice(11, -1));
      if (isNaN(currentBrightness)) {
        currentBrightness = 100;
      }

      if (currentBrightness > 0) {
        elem.style.filter = `brightness(${currentBrightness - 10}%)`;
      } else {
        currentBrightness = 0;
      }
    };

    const lightenMode = (elem) => {
      let currentBrightness = parseFloat(elem.style.filter.slice(11, -1));
      if (isNaN(currentBrightness)) {
        currentBrightness = 100;
      }

      if (currentBrightness < 1000) {
        elem.style.filter = `brightness(${currentBrightness + 100}%)`;
      } else {
        currentBrightness = 800; // Set a fallback value, if needed
      }
    };

    const toggleShade = (elem) => {
      shadingMode(elem);
    };

    const toggleLighten = (elem) => {
      lightenMode(elem.previousElementSibling); // Find the square element and pass it to lightenMode
    };
  </script>
</body>
</html>